jQuery(document).ready(function(o){var t,a=o("#ssp-external-feed-progress"),s=o("#podcast_settings_tab_nonce"),n=!0;if(0<a.length){let e=a.data("progress"),r;o(".form-table").hide().prev("p").hide(),r=confirm(e?"Would you like to restore the previous import?":"You are about to import an external RSS feed."),!0===r?(function t(){o.ajax({url:ajaxurl,type:"get",data:{action:"import_external_rss_feed",nonce:s.val()},timeout:0}).done(function(e){var r;"error"!==e.status?e.is_finished?(u(),i(e.episodes),l(100,"green"),d(e.message),f()):t():(r=e.hasOwnProperty("message")?e.message:"",c(r))}).fail(function(e){var e=e.hasOwnProperty("message")?e.message:"";c(e)})}(),n=!0,t=setInterval(p,2e3),l(e)):(f(),o(".ssp-external-feed-message").addClass("import-error").html("<h3>Import cancelled!</h3>"))}function l(e,r){r=r||"blue",a.progressbar({value:e}),r="blue"===(e=r)?"green":"blue",a.removeClass(r).addClass(e)}function i(e){for(var r=o("#ssp-external-feed-status"),t="",a=0;a<e.length;a++)t="<p>Imported "+e[a]+"</p>"+t;r.html(t)}function d(e){o(".ssp-external-feed-message").removeClass("import-error").html(e)}function u(){n=!1,clearInterval(t)}function p(){o.ajax({url:ajaxurl,type:"get",data:{action:"get_external_rss_feed_progress",nonce:s.val()}}).done(function(e){n&&(l(e.progress,"blue"),i(e.episodes))})}function f(){o.ajax({url:ajaxurl,type:"get",data:{action:"reset_rss_feed_data",nonce:s.val()}}).done(function(e){"error"===e.status&&alert("Could not reset current feed import, please refresh this page to try again")})}function c(e=""){e=e||"An error occurred importing the RSS feed. \n\n We'll try to proceed importing after the page refresh.",alert(e)||window.location.reload()}});