jQuery(document).ready(function(n){var t,o,i,a=n("#podmotor_account_email"),e=n("#podmotor_account_api_token"),s=n(".js-parent-category"),d=n("#validate_api_credentials"),{}=wp.i18n;function c(){var a=n(this),e=a.data("subcategory"),s=a.find("option:selected").text();if(!e||!s)return!1;a=n("#"+e);a.find("optgroup").hide();e=a.find('optgroup[label="'+s+'"]');e.length&&"-- None --"!==s?e.show():a.val("")}function l(){return n(i+" input[type=checkbox]:checked")}function r(){t.prop("disabled",0===l().length)}0<a.length&&0<e.length&&(""!==a.val()&&""!==e.val()||n("#ssp-settings-submit").prop("disabled","disabled"),a.on("change paste keydown keyup",function(){n("#ssp-settings-submit").prop("disabled","disabled")}),e.on("change paste keydown keyup",function(){n("#ssp-settings-submit").prop("disabled","disabled")}),d.on("click",function(){var a=n("#podmotor_account_email").val(),e=n("#podmotor_account_api_token").val(),s=n("#podcast_settings_tab_nonce").val(),t=n(".validate-api-credentials-message");t.length||(t=n('<span class="validate-api-credentials-message"></span>'),d.parent().append(t)),t.html("Validating API credentials..."),d.addClass("loader"),n.ajax({method:"GET",url:ajaxurl,data:{action:"validate_castos_credentials",api_token:e,email:a,nonce:s}}).done(function(a){d.removeClass("loader"),"success"===a.status?(n(".validate-api-credentials-message").html("Credentials Valid. Please click 'Save Settings' to save Credentials."),n("#ssp-settings-submit").prop("disabled",""),d.val("Valid Credentials"),d.addClass("valid")):(d.addClass("invalid"),n(".validate-api-credentials-message").html(a.message)),d.trigger("validated")})}),n("#podmotor_disconnect").on("change",function(a){var e=n(this);!e.is(":checked")||!0!==confirm("If you disconnect from Castos hosting you will no longer be able to upload media files to the Castos hosting platform. If youâ€™re no longer a Castos customer your media files may no longer be available to your listeners.")&&(setTimeout(function(){e.removeAttr("checked")},0),a.preventDefault(),a.stopPropagation())})),s.length&&(s.each(c),s.on("change",c)),t=n("#trigger_sync"),o=n("#podcast_settings_tab_nonce").val(),i=".js-sync-podcast",t.length&&(r(),n(i+" input[type=checkbox]").change(function(){r()}),t.click(function(){t.addClass("loader");var e=n(".ssp-sync-msg"),a=l(),s=[];e.length||(e=n('<span class="ssp-sync-msg"></span>'),t.parent().append(e)),a.each(function(){s.push(n(this).val())}),n.ajax({method:"GET",url:ajaxurl,data:{action:"sync_castos",nonce:o,podcasts:s}}).done(function(a){var s='<div class="sync-overview">'+a.data.msg+"</div>";n.each(a.data.podcasts,function(a,e){!function(a,e,s=""){(a=a.closest(i).find(".js-sync-status")).removeClass("synced_with_errors success none sending failed").addClass(e),s&&a.find("span").html(s)}(n("#podcasts_sync_"+a),e.status,e.title),s+='<div class="sync-msg">'+e.msg+"</div>"}),t.removeClass("loader"),e.addClass(a.success?"success":"error"),e.html(s)})}))});